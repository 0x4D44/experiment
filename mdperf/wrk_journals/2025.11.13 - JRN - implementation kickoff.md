# Work Journal - Implementation Kickoff (Rust Benchmarking App)

## 2025-11-13 14:06 UTC
- Received instruction to begin implementation according to the multistage plan.
- Preparing to assess repo state and outline Stage 0 deliverables (workspace scaffolding, config schema, runtime ADR).

## 2025-11-13 14:08 UTC
- Initialized Rust workspace: created Cargo workspace manifest, `.gitignore`, and `benchctl` binary crate scaffold via `cargo new`.
- Next: design CLI/config/orchestrator modules per Stage 0.

## 2025-11-13 14:15 UTC
- Scaffolded `benchctl` binary crate plus workspace manifest and `.gitignore`.
- Implemented CLI, config loader with defaults, orchestrator skeleton, runtime abstraction, telemetry collector, and report schema emitter.
- Added config unit test, ran `cargo fmt`/`cargo test` successfully (no warnings/errors).
- Authored ADR `docs/adr/0001-runtime-execution-model.md` documenting the tokio vs blocking strategy.

## 2025-11-13 15:53 UTC
- Beginning Stage 1 work: need CPU + memory workloads, histogram plumbing, TUI/report integration; first step is to define module APIs and config knobs.

## 2025-11-13 16:02 UTC
- Added CLI overrides for runtime/warmup/run durations and memory/cpu knobs; removed config helper.
- Implemented CPU + memory modules with worker pools, STREAM kernels, hdrhistograms, and integrated them into the orchestrator/report pipeline.
- Added module unit tests plus `cargo fmt`/`cargo test` run (clean); Stage 1 core workloads now produce metrics in JSON output.

## 2025-11-13 16:13 UTC
- Added ratatui-based dashboard + CLI `--no-tui`, channel-driven module status updates, and plain-text fallback for non-TTY runs.
- Orchestrator now streams CPU/memory lifecycle events to the UI and folds results back into warnings when modules fail.
- Ran `cargo fmt`, `cargo test`, and `cargo run -- --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --no-tui` to smoke-test JSON + new CLI knobs.

## 2025-11-13 16:14 UTC
- Planning Stage 1 polish: want richer CPU/memory summaries, resource tags, and warning surfaces before moving to disk/network modules.

## 2025-11-13 16:19 UTC
- Added `ResourceKind` tagging, module summaries, and per-test warnings to `TestReport`; CPU/memory modules now emit GOPS/GBps rollups and low-buffer warnings.
- UI detail column now shows module summaries; orchestrator failure path surfaces errors in both report + dashboard.
- Validated with `cargo fmt`, `cargo test`, and a short `cargo run -- --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --no-tui` smoke.

## 2025-11-13 16:25 UTC
- Added resource-aware scheduler scaffolding: modules now declare `ResourceKind`s, orchestrator inspects conflicts, and honors `--mode parallel` requests with informative warnings when conflicts exist.
- Converted module runners to go through the scheduler path (still sequential today) and ensured UI registers modules from this plan.
- Re-ran `cargo fmt`, `cargo test`, and short `cargo run -- ... --no-tui` smoke to confirm the refactor.

## 2025-11-13 16:44 UTC
- Enabled actual parallel execution for modules with disjoint `ResourceKind`s; orchestrator now schedules via helper functions and downgrades mode when conflicts exist.
- Added live metric streaming: CPU workers sample GOPS mid-run, memory kernels emit GB/s snapshots, and the UI detail column updates via per-module progress callbacks.
- Validated with `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --no-tui`.

## 2025-11-13 17:03 UTC
- Stubbed disk module + temp file manager, wired it into the scheduler/UI, and added CLI overrides for disk file/capacity; JSON report now records execution metadata.
- Added progress callbacks + banner updates so TUI shows mode/runtime + live GOPS/GBps even during parallel runs.
- Tests: `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --disk-file-mb 64 --disk-capacity-mb 256 --no-tui`.

## 2025-11-13 17:06 UTC
- Built disk temp-file manager + disk module stub: reserves capacity-checked temp files, runs sequential write/read loops, streams throughput to the UI.
- Added CLI overrides (`--disk-file-mb`, `--disk-capacity-mb`) and `RunMetadata` in JSON; banner highlights mode/runtime + whether parallelism engaged.
- Validated with `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --disk-file-mb 32 --disk-capacity-mb 128 --no-tui`.

## 2025-11-13 17:12 UTC
- Disk module now runs real sequential write/read passes with pattern selection, fsync toggle, throughput metrics, and progress streaming.
- CLI/config expose `--disk-patterns`, `--disk-fsync`, `--disk-temp-dir`; report captures per-pattern MB/s plus execution metadata.
- Validated with `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --disk-file-mb 32 --disk-capacity-mb 128 --disk-patterns seq-write,seq-read --no-tui`.

## 2025-11-13 17:24 UTC
- Added disk pattern selection with fsync/temp-dir controls, plus throughput metrics + warnings; CLI now supports `--disk-patterns` (seq-write/read) and report includes execution metadata and per-pattern MB/s.
- Temp manager checks host free space via `statvfs` so runs fail fast if `--disk-capacity-mb` exceeds actual availability.
- Validated with `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --disk-patterns seq-write --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --disk-file-mb 16 --disk-capacity-mb 128 --no-tui`.

## 2025-11-13 17:25 UTC
- Added disk pattern CLI/validation plus fsync/temp-dir overrides; disk module now streams per-pattern MB/s and warns when fsync disabled or reads short.
- Temp manager checks host free space before reserving capacity (via `statvfs`). Added unit tests for disk read/write helpers and temp manager.
- Ran `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --disk-patterns seq-write --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --disk-file-mb 16 --disk-capacity-mb 128 --no-tui`.

## 2025-11-13 17:29 UTC
- Added config validation (general run_secs > 0, cpu threads, memory buffer, disk capacity/patterns); main now fails fast on invalid settings.
- Added unit tests for validation + disk I/O helpers, and the temp manager now enforces host free space via statvfs.
- Validated with `cargo fmt`, `cargo test`, and `cargo run -- --mode parallel --disk-patterns seq-write,seq-read --run-secs 1 --warmup-secs 0 --memory-buffer-mb 8 --cpu-threads 2 --disk-file-mb 32 --disk-capacity-mb 64 --no-tui`.
