# Coverage Improvement Plan: 58% → 98%

**Project:** Udio MCP Server
**Current Coverage:** 58% (estimated)
**Target Coverage:** 98%
**Required Gain:** +40 percentage points
**Estimated Duration:** 2-3 weeks
**Date Created:** 2025-11-14

---

## Executive Summary

This plan outlines a systematic approach to increase test coverage from 58% to 98% through six focused stages. The strategy prioritizes high-risk, critical-path functionality while building necessary testing infrastructure.

### Key Metrics

- **Total Untested Functions:** 68
- **New Tests Required:** ~150-200
- **Mock Frameworks Needed:** 2 (Browser, Keychain)
- **Integration Tests Needed:** ~20-30

---

## Stage 1: Testing Infrastructure (Days 1-2)

**Objective:** Build mock frameworks to enable testing of browser and OS-dependent code
**Coverage Gain:** 0% (infrastructure only)
**Priority:** CRITICAL - Unblocks all subsequent stages

### 1.1 Mock Browser Framework

**File:** `src/testing/mock_browser.rs` (new)

**Components to Implement:**
- `MockBrowser` struct
- `MockPage` struct
- `MockElement` struct
- Builder patterns for test scenarios

**Mock Capabilities:**
```rust
pub struct MockBrowser {
    pages: Vec<MockPage>,
    launched: bool,
}

pub struct MockPage {
    url: String,
    elements: HashMap<String, MockElement>,
    navigation_state: NavigationState,
}

pub struct MockElement {
    tag_name: String,
    text_content: String,
    attributes: HashMap<String, String>,
    visible: bool,
}
```

**Key Features:**
- Simulate element finding with/without fallbacks
- Simulate click, type, wait operations
- Simulate navigation and page loading
- Configurable delays and errors
- Element visibility simulation

**Test File:** `src/testing/mock_browser_tests.rs`
**Estimated Time:** 6-8 hours
**Tests to Add:** 10-15 tests for mock framework itself

---

### 1.2 Mock Keychain Framework

**File:** `src/testing/mock_keychain.rs` (new)

**Components to Implement:**
- `MockKeychain` struct
- In-memory credential storage
- Error simulation

**Mock Capabilities:**
```rust
pub struct MockKeychain {
    store: HashMap<String, String>,
    fail_on_store: bool,
    fail_on_retrieve: bool,
}
```

**Key Features:**
- Store/retrieve/delete operations
- Error injection for testing failure paths
- Thread-safe concurrent access

**Test File:** Inline tests in same file
**Estimated Time:** 2-3 hours
**Tests to Add:** 5-8 tests for mock keychain

---

### 1.3 Test Utilities Module

**File:** `src/testing/mod.rs` (new)

**Utilities:**
- Common test fixtures
- Test data builders
- Assertion helpers
- Async test helpers

**Estimated Time:** 2 hours

---

**Stage 1 Deliverables:**
- ✅ Mock browser framework with 10-15 tests
- ✅ Mock keychain framework with 5-8 tests
- ✅ Test utilities module
- ✅ Documentation for using mocks

**Stage 1 Total:** ~12 hours, +15-25 tests

---

## Stage 2: Browser Automation Layer (Days 3-5)

**Objective:** Achieve 100% coverage of browser automation and extraction
**Coverage Gain:** +15% (from 17% to 90%+ in browser module)
**Priority:** CRITICAL

### 2.1 Browser Automation Tests

**File:** `src/browser/automation.rs` (add tests)

**Functions to Test (10 total):**

1. **find_element_with_fallback()**
   - Test successful find with primary selector
   - Test fallback to secondary selector
   - Test fallback to tertiary selector
   - Test failure when all selectors fail
   - **Tests:** 4

2. **find_elements_with_fallback()**
   - Test multiple elements found
   - Test fallback behavior
   - Test empty results
   - **Tests:** 3

3. **click_element()**
   - Test successful click
   - Test click on hidden element (error)
   - Test click timeout
   - **Tests:** 3

4. **type_into_element()**
   - Test typing text
   - Test typing special characters
   - Test typing into disabled element (error)
   - **Tests:** 3

5. **wait_for_element()**
   - Test successful wait
   - Test timeout scenario
   - Test immediate availability
   - **Tests:** 3

6. **wait_for_element_removed()**
   - Test element removal detection
   - Test timeout
   - **Tests:** 2

7. **wait_for_navigation()**
   - Test navigation completion
   - Test timeout
   - **Tests:** 2

8. **take_screenshot()**
   - Test screenshot capture
   - Test error handling
   - **Tests:** 2

9. **scroll_to_element()**
   - Test successful scroll
   - Test scroll to out-of-view element
   - **Tests:** 2

10. **is_element_visible()**
    - Test visible element
    - Test hidden element
    - Test off-screen element
    - **Tests:** 3

**Total Tests for automation.rs:** 27 tests
**Estimated Time:** 8 hours

---

### 2.2 Browser Extraction Tests

**File:** `src/browser/extractor.rs` (add tests)

**Functions to Test (12 total):**

1. **extract_text()** - 2 tests
2. **extract_text_from_all()** - 3 tests
3. **extract_attribute()** - 2 tests
4. **extract_attributes_from_all()** - 3 tests
5. **extract_data_attribute()** - 2 tests
6. **extract_multiple_attributes()** - 3 tests
7. **extract_list_data()** - 4 tests
8. **extract_table_data()** - 5 tests
9. **extract_links()** - 3 tests
10. **extract_image_sources()** - 3 tests
11. **has_class()** - 2 tests
12. **extract_style_property()** - 2 tests

**Total Tests for extractor.rs:** 34 tests
**Estimated Time:** 10 hours

---

### 2.3 Browser Manager Tests

**File:** `src/browser/manager.rs` (add tests)

**Functions to Test (5 untested):**

1. **launch()** - Test successful launch, error handling (3 tests)
2. **get_browser()** - Test before/after launch (2 tests)
3. **is_launched()** - Test state tracking (2 tests)
4. **shutdown()** - Test cleanup (2 tests)
5. **new_page()** - Test page creation (3 tests)

**Total Tests for manager.rs:** 12 tests
**Estimated Time:** 4 hours

---

### 2.4 Browser Selectors Tests

**File:** `src/browser/selectors.rs` (add tests)

**Functions to Test (2 untested):**

1. **from_file()** - Test TOML loading, error cases (3 tests)
2. **load_default()** - Test default config loading (2 tests)

**Total Tests for selectors.rs:** 5 tests
**Estimated Time:** 2 hours

---

**Stage 2 Deliverables:**
- ✅ 27 tests for browser automation
- ✅ 34 tests for browser extraction
- ✅ 12 tests for browser manager
- ✅ 5 tests for browser selectors
- ✅ Browser module at 90%+ coverage

**Stage 2 Total:** ~24 hours, +78 tests, +15% overall coverage

---

## Stage 3: Playback Controller (Days 6-7)

**Objective:** Test all playback control operations
**Coverage Gain:** +10% (from 25% to 100% in playback module)
**Priority:** CRITICAL - Core user-facing features

### 3.1 Playback Controller Tests

**File:** `src/playback/controller.rs` (add tests)

**Functions to Test (12 untested):**

1. **with_selectors()** - Builder pattern (1 test)

2. **play_song()**
   - Test successful playback start
   - Test invalid song ID
   - Test browser interaction
   - **Tests:** 3

3. **pause()**
   - Test pause when playing
   - Test pause when already paused
   - **Tests:** 2

4. **resume()**
   - Test resume when paused
   - Test resume when already playing
   - **Tests:** 2

5. **next()**
   - Test skip to next song
   - Test at end of playlist
   - **Tests:** 2

6. **previous()**
   - Test skip to previous song
   - Test at beginning of playlist
   - **Tests:** 2

7. **stop()**
   - Test stop playback
   - Test state reset
   - **Tests:** 2

8. **get_current_state()**
   - Test state extraction from browser
   - Test parsing edge cases
   - **Tests:** 3

9. **toggle_shuffle()**
   - Test enable shuffle
   - Test disable shuffle
   - **Tests:** 2

10. **set_repeat_mode()**
    - Test each repeat mode (None, One, All)
    - **Tests:** 3

11. **seek()**
    - Test seek forward
    - Test seek backward
    - Test seek beyond duration
    - **Tests:** 3

**Total Tests for controller.rs:** 25 tests
**Estimated Time:** 8 hours

---

**Stage 3 Deliverables:**
- ✅ 25 tests for playback controller
- ✅ Playback module at 100% coverage
- ✅ All user-facing playback features tested

**Stage 3 Total:** ~8 hours, +25 tests, +10% overall coverage

---

## Stage 4: Authentication Layer (Days 8-10)

**Objective:** Test all authentication and security operations
**Coverage Gain:** +12% (from 50% to 95%+ in auth module)
**Priority:** HIGH - Security critical

### 4.1 Keychain Manager Tests

**File:** `src/auth/keychain.rs` (add tests)

**Functions to Test (4 untested):**

1. **store_password()**
   - Test successful storage
   - Test storage failure
   - Test overwrite existing
   - **Tests:** 3

2. **get_password()**
   - Test successful retrieval
   - Test non-existent key
   - Test retrieval failure
   - **Tests:** 3

3. **delete_password()**
   - Test successful deletion
   - Test delete non-existent
   - **Tests:** 2

4. **has_password()**
   - Test key exists
   - Test key doesn't exist
   - **Tests:** 2

**Total Tests for keychain.rs:** 10 tests
**Estimated Time:** 3 hours

---

### 4.2 Credentials Store Tests

**File:** `src/auth/credentials.rs` (add tests)

**Functions to Test (4 untested):**

1. **CredentialsStore::store()** - 3 tests
2. **CredentialsStore::retrieve()** - 3 tests
3. **CredentialsStore::delete()** - 2 tests
4. **CredentialsStore::exists()** - 2 tests

**Total Tests for credentials.rs:** 10 tests
**Estimated Time:** 3 hours

---

### 4.3 Login Automation Tests

**File:** `src/auth/login.rs` (add tests)

**Functions to Test (3 untested):**

1. **login()**
   - Test successful login
   - Test invalid credentials
   - Test network error
   - Test selector fallback
   - **Tests:** 4

2. **is_logged_in()**
   - Test logged-in state detection
   - Test logged-out state detection
   - **Tests:** 2

3. **logout()**
   - Test successful logout
   - Test logout error handling
   - **Tests:** 2

**Total Tests for login.rs:** 8 tests
**Estimated Time:** 4 hours

---

### 4.4 Auth Manager Tests

**File:** `src/auth/manager.rs` (add tests)

**Functions to Test (11 untested):**

1. **with_components()** - Builder (1 test)
2. **store_credentials()** - Storage operation (2 tests)
3. **get_credentials()** - Retrieval operation (2 tests)
4. **delete_credentials()** - Deletion operation (2 tests)

5. **login()**
   - Test successful login flow
   - Test failed login
   - Test session creation
   - **Tests:** 3

6. **login_with_stored_credentials()**
   - Test with valid stored creds
   - Test with no stored creds
   - Test with invalid stored creds
   - **Tests:** 3

7. **get_session()** - Session retrieval (2 tests)

8. **logout()**
   - Test logout and cleanup
   - Test double logout
   - **Tests:** 2

9. **ensure_authenticated()**
   - Test when authenticated
   - Test when not authenticated (triggers login)
   - Test when session expired
   - **Tests:** 3

10. **reauthenticate()**
    - Test successful re-auth
    - Test re-auth failure
    - **Tests:** 2

11. **cleanup_expired_sessions()**
    - Test cleanup of expired sessions
    - Test retention of valid sessions
    - **Tests:** 2

**Total Tests for manager.rs:** 24 tests
**Estimated Time:** 8 hours

---

### 4.5 Session Management Edge Cases

**File:** `src/auth/session.rs` (add tests)

**Functions to Test (2 untested):**

1. **time_until_expiration()** - Edge cases (2 tests)
2. **SessionStore::cleanup_expired()** - Cleanup logic (2 tests)

**Total Tests for session.rs:** 4 tests
**Estimated Time:** 2 hours

---

**Stage 4 Deliverables:**
- ✅ 10 tests for keychain operations
- ✅ 10 tests for credentials store
- ✅ 8 tests for login automation
- ✅ 24 tests for auth manager
- ✅ 4 tests for session edge cases
- ✅ Auth module at 95%+ coverage

**Stage 4 Total:** ~20 hours, +56 tests, +12% overall coverage

---

## Stage 5: MCP Tools & Integration (Days 11-12)

**Objective:** Test tool execution and MCP server integration
**Coverage Gain:** +8% (tool execute methods + server lifecycle)
**Priority:** MEDIUM

### 5.1 MCP Tool Execution Tests

**Files:** `src/mcp/tools/*.rs` (add tests)

**Tools to Test:**

1. **PlaySongTool::execute()**
   - Test with valid song ID
   - Test with invalid song ID
   - Test browser integration
   - Test state update
   - **Tests:** 4

2. **ListPlaylistSongsTool::execute()**
   - Test with valid playlist
   - Test with invalid playlist
   - Test limit parameter
   - Test empty playlist
   - **Tests:** 4

3. **ControlPlaybackTool::execute()**
   - Test each action (pause, resume, next, previous, stop)
   - Test invalid action
   - Test state updates
   - **Tests:** 7

**Total Tests for tools:** 15 tests
**Estimated Time:** 6 hours

---

### 5.2 MCP Server Integration Tests

**File:** `src/mcp/server.rs` (add tests)

**Functions to Test (5 untested):**

1. **with_config()** - Builder (1 test)
2. **tools()** - Accessor (1 test)

3. **run()**
   - Test server lifecycle
   - Test graceful shutdown
   - **Tests:** 2

4. **handle_notification()**
   - Test notification processing
   - Test different notification types
   - **Tests:** 2

5. **handle_message()**
   - Test message routing
   - Test error cases
   - **Tests:** 2

**Total Tests for server.rs:** 8 tests
**Estimated Time:** 4 hours

---

### 5.3 Transport Integration Tests

**File:** `src/mcp/transport/stdio.rs` (add tests)

**Functions to Test:**

1. **receive()**
   - Test reading messages
   - Test EOF handling
   - Test malformed JSON
   - **Tests:** 3

**Total Tests for stdio.rs:** 3 tests
**Estimated Time:** 2 hours

---

**Stage 5 Deliverables:**
- ✅ 15 tests for tool execution
- ✅ 8 tests for server integration
- ✅ 3 tests for transport layer
- ✅ MCP module at 95%+ coverage

**Stage 5 Total:** ~12 hours, +26 tests, +8% overall coverage

---

## Stage 6: Playlist & Polish (Days 13-14)

**Objective:** Complete remaining gaps and edge cases
**Coverage Gain:** +5% (playlist operations + utilities)
**Priority:** MEDIUM

### 6.1 Playlist Manager Tests

**File:** `src/playlist/manager.rs` (add tests)

**Functions to Test (4 untested):**

1. **with_extractor()** - Builder (1 test)

2. **get_playlist()**
   - Test successful retrieval
   - Test cache hit
   - Test cache miss
   - Test extraction failure
   - **Tests:** 4

3. **list_playlists()**
   - Test listing playlists
   - Test empty results
   - **Tests:** 2

4. **invalidate_cache()**
   - Test cache invalidation
   - Test multi-entry invalidation
   - **Tests:** 2

**Total Tests for manager.rs:** 9 tests
**Estimated Time:** 4 hours

---

### 6.2 Playlist Extractor Tests

**File:** `src/playlist/extractor.rs` (add tests)

**Functions to Test (3 untested):**

1. **with_selectors()** - Builder (1 test)

2. **extract_playlist()**
   - Test successful extraction
   - Test missing elements
   - Test malformed data
   - **Tests:** 3

3. **extract_songs()**
   - Test song list extraction
   - Test empty playlist
   - Test duration parsing variants
   - **Tests:** 3

**Total Tests for extractor.rs:** 7 tests
**Estimated Time:** 3 hours

---

### 6.3 Model Edge Cases

**Files:** `src/models/*.rs` (add tests)

**Functions to Test:**

1. **Playlist::songs_by_duration()** - Sorting logic (3 tests)
2. **PlaybackState::update_timestamp()** - Time updates (2 tests)

**Total Tests for models:** 5 tests
**Estimated Time:** 2 hours

---

### 6.4 Utility & Builder Methods

**Various Files** (add tests)

**Functions to Test:**

1. **BrowserConfig::with_chrome_path()** - Builder (1 test)
2. **Selectors::from_file()** - File loading (2 tests)
3. **Selectors::load_default()** - Default loading (1 test)

**Total Tests for utilities:** 4 tests
**Estimated Time:** 1 hour

---

**Stage 6 Deliverables:**
- ✅ 9 tests for playlist manager
- ✅ 7 tests for playlist extractor
- ✅ 5 tests for model edge cases
- ✅ 4 tests for utility methods
- ✅ All modules at 95%+ coverage

**Stage 6 Total:** ~10 hours, +25 tests, +5% overall coverage

---

## Coverage Progression Summary

| Stage | Focus Area | Days | Tests Added | Coverage Gain | Cumulative |
|-------|-----------|------|-------------|---------------|------------|
| **Stage 1** | Testing Infrastructure | 1-2 | +20 | 0% | 58% |
| **Stage 2** | Browser Automation | 3-5 | +78 | +15% | 73% |
| **Stage 3** | Playback Controller | 6-7 | +25 | +10% | 83% |
| **Stage 4** | Authentication | 8-10 | +56 | +12% | 95% |
| **Stage 5** | MCP Integration | 11-12 | +26 | +3% | 98% |
| **Stage 6** | Polish & Edge Cases | 13-14 | +25 | +2% | **100%** |
| **TOTAL** | - | 14 days | **+230** | **+42%** | **100%** |

---

## Implementation Strategy

### Daily Execution Plan

**Week 1: Infrastructure & Critical Path**

**Day 1-2:** Stage 1 - Testing Infrastructure
- Morning: Implement MockBrowser framework
- Afternoon: Implement MockKeychain framework
- Evening: Create test utilities module

**Day 3-4:** Stage 2 Part 1 - Browser Automation
- Implement automation.rs tests (27 tests)
- Implement manager.rs tests (12 tests)

**Day 5:** Stage 2 Part 2 - Browser Extraction
- Implement extractor.rs tests (34 tests)
- Implement selectors.rs tests (5 tests)

**Weekend:** Buffer for any Stage 1-2 overruns

---

**Week 2: Core Features & Security**

**Day 6-7:** Stage 3 - Playback Controller
- Implement all playback control tests (25 tests)
- Integration testing with mock browser

**Day 8-9:** Stage 4 Part 1 - Auth Security
- Implement keychain tests (10 tests)
- Implement credentials tests (10 tests)
- Implement login tests (8 tests)

**Day 10:** Stage 4 Part 2 - Auth Manager
- Implement auth manager tests (24 tests)
- Implement session edge case tests (4 tests)

**Weekend:** Buffer for Stage 3-4 overruns

---

**Week 3: Integration & Polish**

**Day 11-12:** Stage 5 - MCP Integration
- Implement tool execution tests (15 tests)
- Implement server integration tests (8 tests)
- Implement transport tests (3 tests)

**Day 13-14:** Stage 6 - Final Polish
- Implement playlist tests (16 tests)
- Implement edge case tests (9 tests)
- Run full coverage analysis
- Fix any gaps found

---

## Testing Best Practices

### Test Structure

All new tests should follow this structure:

```rust
#[cfg(test)]
mod tests {
    use super::*;
    use crate::testing::{MockBrowser, MockKeychain};

    #[tokio::test]
    async fn test_function_name_scenario() {
        // Arrange
        let mock_browser = MockBrowser::builder()
            .with_page("https://example.com")
            .with_element("#selector", "value")
            .build();

        // Act
        let result = function_under_test(&mock_browser).await;

        // Assert
        assert!(result.is_ok());
        assert_eq!(result.unwrap(), expected_value);
    }
}
```

### Test Naming Convention

- `test_<function>_<scenario>`
- `test_<function>_success`
- `test_<function>_error_<error_type>`
- `test_<function>_edge_case_<case>`

### Coverage Verification

After each stage:
```bash
cargo test
cargo tarpaulin --out Html --output-dir coverage
```

---

## Risk Mitigation

### Potential Blockers

1. **Mock Framework Complexity**
   - **Risk:** Mock browser too complex to implement
   - **Mitigation:** Start simple, add complexity incrementally
   - **Fallback:** Use trait-based mocking instead of full mock

2. **Integration Test Failures**
   - **Risk:** Real browser tests unstable
   - **Mitigation:** Use mocks for unit tests, minimal integration tests
   - **Fallback:** Accept slightly lower coverage for unstable components

3. **Time Overruns**
   - **Risk:** Stages take longer than estimated
   - **Mitigation:** Built-in weekend buffers
   - **Fallback:** Prioritize critical paths, defer edge cases

4. **Flaky Tests**
   - **Risk:** Async/timing issues cause flakes
   - **Mitigation:** Use deterministic mocks, avoid sleeps
   - **Fallback:** Implement retry logic for integration tests

---

## Success Criteria

### Stage Completion Checklist

Each stage is complete when:
- ✅ All planned tests implemented
- ✅ All tests passing consistently
- ✅ No new warnings or errors
- ✅ Coverage target for stage achieved
- ✅ Code reviewed (self-review at minimum)
- ✅ Committed to version control

### Overall Project Success

Project achieves 98% coverage when:
- ✅ Total coverage >= 98% (measured by tarpaulin)
- ✅ All critical functions tested
- ✅ All tests passing (125 existing + 230 new = 355 total)
- ✅ No flaky tests
- ✅ Documentation updated
- ✅ Coverage report generated

---

## Deliverables

### Code Deliverables

1. **Mock Frameworks**
   - `src/testing/mock_browser.rs`
   - `src/testing/mock_keychain.rs`
   - `src/testing/mod.rs`

2. **Test Files**
   - Enhanced tests in all 27 source modules
   - ~230 new unit/integration tests

3. **Documentation**
   - Testing guide for contributors
   - Mock framework usage examples

### Report Deliverables

1. **Coverage Reports**
   - HTML coverage report (tarpaulin)
   - Per-module coverage breakdown
   - Trend analysis (58% → 98%)

2. **Test Inventory**
   - Complete list of all tests
   - Test-to-function mapping
   - Coverage gaps (if any remain)

---

## Maintenance Plan

### Post-Implementation

1. **CI/CD Integration**
   - Add coverage checks to CI pipeline
   - Enforce minimum 95% coverage for new code
   - Generate coverage reports on each commit

2. **Ongoing Monitoring**
   - Weekly coverage reviews
   - Monthly test health checks
   - Quarterly test suite optimization

3. **Coverage Regression Prevention**
   - Block PRs that decrease coverage
   - Require tests for all new functions
   - Periodic audit of test quality

---

## Appendix A: Test Count by Module (Target)

| Module | Current Tests | New Tests | Total Target | Target Coverage |
|--------|--------------|-----------|--------------|-----------------|
| browser/automation | 3 | 27 | 30 | 100% |
| browser/extractor | 4 | 34 | 38 | 100% |
| browser/manager | 3 | 12 | 15 | 100% |
| browser/selectors | 4 | 5 | 9 | 100% |
| browser/config | 3 | 1 | 4 | 100% |
| playback/controller | 6 | 25 | 31 | 100% |
| auth/keychain | 2 | 10 | 12 | 100% |
| auth/credentials | 8 | 10 | 18 | 100% |
| auth/login | 3 | 8 | 11 | 100% |
| auth/manager | 5 | 24 | 29 | 100% |
| auth/session | 6 | 4 | 10 | 100% |
| mcp/tools/* | 6 | 15 | 21 | 100% |
| mcp/server | 9 | 8 | 17 | 100% |
| mcp/transport | 5 | 3 | 8 | 100% |
| playlist/manager | 4 | 9 | 13 | 100% |
| playlist/extractor | 5 | 7 | 12 | 100% |
| models/* | 26 | 5 | 31 | 100% |
| **TOTAL** | **125** | **230** | **355** | **98%+** |

---

## Appendix B: Priority Matrix

### Critical Priority (Must Have for 98%)

1. Browser automation (automation.rs, extractor.rs)
2. Playback controller (controller.rs)
3. Auth manager (manager.rs)
4. Tool execution (all tools)

### High Priority (Important for 98%)

5. Keychain operations (keychain.rs)
6. Login automation (login.rs)
7. Credentials store (credentials.rs)
8. Browser manager (manager.rs)

### Medium Priority (Needed for 98%)

9. Playlist operations (manager.rs, extractor.rs)
10. Server integration (server.rs)
11. Transport layer (stdio.rs)

### Low Priority (Nice to Have, pushes toward 100%)

12. Edge cases (models, utilities)
13. Builder methods (various)
14. File I/O (selectors.rs)

---

## Appendix C: Timeline Gantt Chart

```
Week 1:
Day 1-2:  [====== Stage 1: Infrastructure ======]
Day 3-4:  [====== Stage 2A: Browser Automation ======]
Day 5:    [== Stage 2B: Extraction ==]

Week 2:
Day 6-7:  [====== Stage 3: Playback ======]
Day 8-9:  [====== Stage 4A: Auth Security ======]
Day 10:   [== Stage 4B: Auth Manager ==]

Week 3:
Day 11-12: [====== Stage 5: Integration ======]
Day 13-14: [====== Stage 6: Polish ======]
```

---

**Plan Status:** READY FOR IMPLEMENTATION
**Next Step:** Execute Stage 1 - Testing Infrastructure
**Estimated Completion:** 2-3 weeks from start
**Final Coverage Target:** 98-100%
